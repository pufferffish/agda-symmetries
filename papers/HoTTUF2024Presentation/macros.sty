\ProvidesPackage{macros}

\RequirePackage{xparse}
\RequirePackage{amsmath}
\RequirePackage{perfectcut}
\RequirePackage{listings}
\RequirePackage{colonequals}

\let\ps\perfectparens%

\RequirePackage{hott}

% math
\newcommand{\xto}[1]{\xlongrightarrow{#1}}

% universal algebra

\newcommand{\op}{\term{op}}
\newcommand{\ar}{\term{ar}}

\newcommand{\sig}{\sigma}
\NewDocumentCommand{\Sig}{O{\sig}}{
  F_{#1}
}

\newcommand{\Alg}{\type{Alg}}
\NewDocumentCommand{\sigAlg}{O{\sig}}{
  {#1}\text{-}\Alg
}
\NewDocumentCommand{\SigAlg}{O{\Sig}}{
  {#1}\text{-}\Alg
}

\newcommand{\eqsig}{\varepsilon}
\NewDocumentCommand{\EqSig}{O{\eqsig}}{F_{#1}}

\NewDocumentCommand{\tree}{E{_}{\sigma}O{}}{
  \mathsf{Tr}{_{#1}}
  \ifstrempty{#2}{}{\ps{#2}}
}
\newcommand{\str}[1]{\mathfrak{#1}}

\newcommand{\ext}[1]{{#1}^{\sharp}}

\newcommand{\eq}{\term{eq}}
\newcommand{\fv}{\term{fv}}

\newcommand{\lhs}{\mathscr{l}}
\newcommand{\rhs}{\mathscr{r}}

\newcommand{\eqleft}{l}
\newcommand{\eqright}{r}

\newcommand{\entails}{\vDash}

\newcommand{\reln}{\mathrel{\boldsymbol{\approx}}}

% monoids
\newcommand{\Mon}{\type{Mon}}
\newcommand{\CMon}{\type{CMon}}

\newcommand{\munit}{e}
% \newcommand{\mmult}{\boldsymbol{\cdot}}
\newcommand{\mmult}{\bullet}

%
\newcommand{\LL}{\mathcal{L}}
\newcommand{\OL}{\mathcal{OL}}
\newcommand{\MM}{\mathcal{M}}

% sort
\newcommand{\sort}{\mathsf{sort}}
\newcommand{\sect}{\mathscr{s}}

% yoneda
\DeclareFontFamily{U}{min}{}
\DeclareFontShape{U}{min}{m}{n}{<-> udmj30}{}
\newcommand{\yo}
{\!\text{\usefont{U}{min}{m}{n}\symbol{'210}}\!}

% code listings
\lstloadlanguages{Haskell}
\lstdefinelanguage{Agda}{
  aboveskip        = 0pt,
  belowskip        = -1\baselineskip,
  language         = Haskell,
  showstringspaces = false,
  xleftmargin      = .01\textwidth,
  xrightmargin     = .01\textwidth,
  columns          = fullflexible,
  keepspaces       = true,
  basewidth        = {0em,0em},
  morekeywords     = {},
  deletekeywords   = {List},
  emph             = [1]{List,SList,PList,Mset,SMC,FMSet,Perm,Maybe,hProp,hSet},
  emph             = [2]{swap,trunc,eq,squash,perm-refl,perm-swap},
  emph             = [3]{i0,i1,hcomp,Nat},
  alsoletter       = {_,-},
  escapeinside     = ||,
  moredelim        = **[is][\only<+>{\color{red}}]{@}{@},
  basicstyle       = \ttfamily\color{solarized-base00},
  keywordstyle     = \bfseries\color{solarized-cyan},
  emphstyle        = [1]\bfseries\color{solarized-orange},
  emphstyle        = [2]\bfseries\color{solarized-base01},
  emphstyle        = [3]\color{solarized-blue},
  identifierstyle  = \color{solarized-base02},
  stringstyle      = \color{solarized-orange},
  commentstyle     = \itshape\color{solarized-cyan},
  literate         = {->}{{$\rightarrow$}}2
                     {->m}{{$\xrightarrow{Mon}$}}2
                     {->cm}{{$\xrightarrow{CMon}$}}2
                     {lambda}{{λ\!}}2
                     {forall}{{\ensuremath{\forall}}}2
                     {leq}{{\ensuremath{\leq}}}2
                     {times}{{×}}2 {plus}{{+}}2 {uplus}{{$\uplus$}}2
                     {mem}{{$\in$}}2
                     {top}{{$\top$}}2 {bot}{{$\bot$}}2
                     {land}{{∧}}2 {lor}{{∨}}2
                     {exists}{{∃}}2
                     {==}{{$\id$}}2
                     {nil}{{\color{solarized-base01}[]}}2
                     {cons}{{\color{solarized-base01}::}}2
                     {append}{{\color{solarized-base01}++}}2
                     {union}{{\color{solarized-base01}$\bigcup$}}2
                     {tensor}{{\color{solarized-base01}⊗}}2
                     {sharp}{{\color{solarized-base01}\ensuremath{^{\text{\#}}}}}2
                     {UU}{{\color{solarized-base01}$\UU$}}2
}
\lstnewenvironment{code}{\lstset{language=Agda}}{}
\lstdefinestyle{inline}{
  breaklines        = true,
  breakatwhitespace = true
}
\newcommand{\inline}[1]{\lstinline[language=Agda,style=inline]{#1}}
\newcommand{\inlinelabel}[1]{
  \lstinline[language=Agda,style=inline,basicstyle=\ttfamily\tiny\color{solarized-base01}]{#1}
}

\newcommand{\vc}[1]{\textcolor{solarized-red}{VC: #1}}
