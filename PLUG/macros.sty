\ProvidesPackage{macros}

\RequirePackage{xparse}
\RequirePackage{amsmath}
\RequirePackage{perfectcut}
\RequirePackage{listings}

\let\ps\perfectparens%

\RequirePackage{hott}

% math
\newcommand{\xto}[1]{\xlongrightarrow{#1}}

% universal algebra

\newcommand{\op}{\term{op}}
\newcommand{\ar}{\term{ar}}

\newcommand{\sig}{\sigma}
\NewDocumentCommand{\Sig}{O{\sig}}{
  F_{#1}
}

\newcommand{\Alg}{\type{Alg}}
\NewDocumentCommand{\sigAlg}{O{\sig}}{
  {#1}\text{-}\Alg
}
\NewDocumentCommand{\SigAlg}{O{\Sig}}{
  {#1}\text{-}\Alg
}

\NewDocumentCommand{\tree}{O{\sigma}m}{
  \mathsf{Tr}{_{#1}}\ps{#2}
}
\newcommand{\str}[1]{\mathfrak{#1}}

\newcommand{\ext}[1]{{#1}^{\sharp}}

\newcommand{\eq}{\term{eq}}
\newcommand{\fv}{\term{fv}}

\newcommand{\lhs}{\mathscr{l}}
\newcommand{\rhs}{\mathscr{r}}

\newcommand{\entails}{\vDash}

% monoids
\newcommand{\Mon}{\type{Mon}}
\newcommand{\CMon}{\type{CMon}}

%
\newcommand{\LL}{\mathcal{L}}
\newcommand{\MM}{\mathcal{M}}

% sort
\newcommand{\sort}{\mathsf{sort}}
\newcommand{\sect}{\mathscr{s}}

% code listings
\lstloadlanguages{Haskell}
\lstdefinelanguage{Agda}{
  language         = Haskell,
  showstringspaces = false,
  xleftmargin      = .01\textwidth,
  xrightmargin     = .01\textwidth,
  columns          = fullflexible,
  keepspaces       = true,
  basewidth        = {0em,0em},
  morekeywords     = {},
  deletekeywords   = {List},
  emph             = [1]{List,Mset,SMC,FMSet,Perm},
  emph             = [2]{i0,i1,hcomp,Nat},
  alsoletter       = {_,-},
  escapeinside     = ||,
  moredelim        = **[is][\only<+>{\color{red}}]{@}{@},
  basicstyle       = \ttfamily\color{solarized-base00},
  keywordstyle     = \bfseries\color{solarized-cyan},
  emphstyle        = [1]\bfseries\color{solarized-orange},
  emphstyle        = [2]\color{solarized-blue},
  identifierstyle  = \color{solarized-base02},
  stringstyle      = \color{solarized-orange},
  commentstyle     = \itshape\color{solarized-cyan},
  literate         = {->}{{$\rightarrow$}}2
                     {->m}{{$\xrightarrow{Mon}$}}2
                     {->cm}{{$\xrightarrow{CMon}$}}2
                     {lambda}{{λ\!}}2
                     {forall}{{∀}}2
                     {times}{{×}}2 {plus}{{+}}2 {uplus}{{$\uplus$}}2
                     {top}{{$\top$}}2 {bot}{{$\bot$}}2
                     {land}{{∧}}2 {lor}{{∨}}2
                     {exists}{{∃}}2
                     {==}{{≡}}2
                     {nil}{{\color{solarized-base01}[]}}2
                     {cons}{{\color{solarized-base01}::}}2
                     {append}{{\color{solarized-base01}++}}2
                     {union}{{\color{solarized-base01}$\bigcup$}}2
                     {tensor}{{\color{solarized-base01}⊗}}2
                     {sharp}{{\color{solarized-base01}\ensuremath{^{\text{\#}}}}}2
}
\lstnewenvironment{code}{\lstset{language=Agda}}{}
\lstdefinestyle{inline}{
  breaklines        = true,
  breakatwhitespace = true
}
\newcommand{\inline}[1]{\lstinline[language=Agda,style=inline]{#1}}
\newcommand{\inlinelabel}[1]{
  \lstinline[language=Agda,style=inline,basicstyle=\ttfamily\tiny\color{solarized-base01}]{#1}
}
